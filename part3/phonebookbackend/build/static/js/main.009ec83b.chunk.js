(this.webpackJsonpthephonebook=this.webpackJsonpthephonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(39)},19:function(e,n,t){},20:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(12),o=t.n(c),u=(t(19),t(13)),i=t(2);function l(e){var n=e.search,t=e.onChange;return r.a.createElement("div",null,"filter shown with: ",r.a.createElement("input",{value:n,onChange:t}))}t(20);function m(e){var n=e.type,t=e.message;return r.a.createElement("div",{className:n},t)}function s(e){var n=e.onSubmit,t=e.name,a=e.nameChange,c=e.number,o=e.numberChange;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:t,onChange:a})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:c,onChange:o})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))}function f(e){var n=e.persons,t=e.search,a=e.deletePerson;return r.a.createElement("div",null,n.filter((function(e){return~e.name.toLowerCase().indexOf(t.toLowerCase())})).map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("h4",null,e.name," ",e.number),r.a.createElement("button",{onClick:function(){return function(e){window.confirm("Delete ".concat(e.name,"?"))&&a(e)}(e)}},"delete"))})))}var d=t(21).default,h="/api/persons",b=function(){return d.get(h).then((function(e){return e.data}))},p=function(e){return d.post(h,e).then((function(e){return e.data}))},g=function(e,n){return d.put("".concat(h,"/").concat(e),n||null).then((function(e){return e.data}))},v=function(e){return d.delete("".concat(h,"/").concat(e)).then((function(){return e}))},E=function(){var e=Object(a.useState)([{name:"Arto Hellas",number:"040-123456",id:1}]),n=Object(i.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),d=Object(i.a)(o,2),h=d[0],E=d[1],w=Object(a.useState)(""),y=Object(i.a)(w,2),O=y[0],j=y[1],C=Object(a.useState)(""),S=Object(i.a)(C,2),k=S[0],T=S[1],P=Object(a.useState)({type:"",message:""}),x=Object(i.a)(P,2),A=x[0],D=x[1];return Object(a.useEffect)((function(){b().then((function(e){console.log(e),c(e)}))}),[]),r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),A?r.a.createElement(m,{type:A.type,message:A.message}):[],r.a.createElement(l,{search:k,onChange:function(e){T(e.target.value)}}),r.a.createElement("h3",null,"add a new"),r.a.createElement(s,{onSubmit:function(e){e.preventDefault(),console.log("add",e.target);var n=t.find((function(e){return e.name===h})),a={name:h,number:O};n?window.confirm("".concat(h," isalready added to phonebook,replace the old number with a new one?"))&&g(n.id,a).then((function(e){c(t.map((function(t){return t.id!==n.id?t:e})))})).catch((function(e){var n=e.response.data;D({type:"warning",message:"".concat(n.error)}),setTimeout((function(){D(null)}),5e3)})):p(a).then((function(e){c(t.concat(Object(u.a)({},a,{id:e.id}))),D({type:"info",message:"Added ".concat(e.name)}),setTimeout((function(){D(null)}),5e3)})).catch((function(e){var n=e.response.data;D({type:"warning",message:"".concat(n.error)}),setTimeout((function(){D(null)}),5e3)}))},name:h,nameChange:function(e){E(e.target.value)},number:O,numberChange:function(e){j(e.target.value)}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(f,{persons:t,search:k,deletePerson:function(e){v(e.id).then((function(e){c(t.filter((function(n){return n.id!==e})))})).catch((function(n){D({type:"warning",message:"Infomation of ".concat(e.name," has already been removed from server")}),setTimeout((function(){D(null)}),5e3)}))}}))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,null)),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.009ec83b.chunk.js.map